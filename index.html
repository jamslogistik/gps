<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pengirim GPS ke Firebase</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>
</head>
<body>
    <h2>Pengirim GPS ke Firebase</h2>
    <p>Latitude: <span id="lat">Menunggu...</span></p>
    <p>Longitude: <span id="lon">Menunggu...</span></p>
    <p>Status: <span id="status">Menunggu izin lokasi...</span></p>

    <script>
        // Konfigurasi Firebase (Ganti dengan milik Anda)
         const firebaseConfig = {
            apiKey: "AIzaSyAm7UYqJxVQE-66N7iw5fF0bwLnV9WHrV8",
            authDomain: "gps-tracking-46fc6.firebaseapp.com",
            databaseURL: "https://gps-tracking-46fc6-default-rtdb.firebaseio.com",
            projectId: "gps-tracking-46fc6",
            storageBucket: "gps-tracking-46fc6.appspot.com",
            messagingSenderId:  "623400729396",
            appId: "1:623400729396:web:2e225550227e1fa1148361"
        };

        // Inisialisasi Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        function sendLocation() {
            if (!navigator.geolocation) {
                document.getElementById("status").textContent = "Geolocation tidak didukung di perangkat ini.";
                return;
            }

            navigator.geolocation.watchPosition(position => {
                let lat = position.coords.latitude;
                let lon = position.coords.longitude;

                document.getElementById("lat").textContent = lat;
                document.getElementById("lon").textContent = lon;
                document.getElementById("status").textContent = "Lokasi diperbarui & dikirim ke Firebase.";

                // Kirim data ke Firebase
                database.ref("gpsData").set({
                    latitude: lat,
                    longitude: lon,
                    timestamp: Date.now()
                });
            }, error => {
                document.getElementById("status").textContent = "Gagal mendapatkan lokasi! Periksa izin.";
                console.error("Gagal mendapatkan lokasi:", error.message);
            }, { enableHighAccuracy: true });
        }

        // Panggil fungsi untuk mulai mengambil lokasi
        sendLocation();
    </script>
</body>
</html>
